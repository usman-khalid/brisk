import{getMetadata as x,decorateIcons as S}from"../../scripts/aem.min.js";const A=o=>{const a=["/fragments/","/forms/"];o.querySelectorAll("picture").forEach(e=>{var s,v;if(((s=e.nextElementSibling)==null?void 0:s.tagName)==="BR"&&((v=e.nextElementSibling.nextElementSibling)==null?void 0:v.tagName)==="A"){const n=e.nextElementSibling.nextElementSibling;if(n.textContent.includes(n.getAttribute("href"))){if(a.some(l=>n.getAttribute("href").includes(l)))return;e.nextElementSibling.remove(),n.innerHTML=e.outerHTML,e.replaceWith(n)}return}const d=e.parentElement,t=d.nextElementSibling;if(d.tagName==="P"&&(t==null?void 0:t.tagName)==="P"&&t.children.length===1){const n=t.querySelector("a");if(n&&n.textContent.includes(n.getAttribute("href"))){if(a.some(l=>n.getAttribute("href").includes(l)))return;n.parentElement.remove(),n.innerHTML=e.outerHTML,e.replaceWith(n)}}})},y="_nav-wrapper_1o8zg_10",L="_nav-hamburger_1o8zg_42",_="_nav-brand_1o8zg_87",w="_nav-sections_1o8zg_100",k="_nav-tools_1o8zg_128",q="_nav-drop_1o8zg_214",r={navWrapper:y,navHamburger:L,navBrand:_,navSections:w,navTools:k,navDrop:q},c=window.matchMedia("(min-width: 1200px)");function h(o){if(o.code==="Escape"){const a=document.getElementById("nav"),i=a.querySelector(`.${r.navSections}`),e=i.querySelector('[aria-expanded="true"]');e&&c.matches?(p(i),e.focus()):c.matches||(m(a,i),a.querySelector("button").focus())}}function H(o){const a=document.activeElement;if(a.className===r.navDrop&&(o.code==="Enter"||o.code==="Space")){const e=a.getAttribute("aria-expanded")==="true";p(a.closest(`.${r.navSections}`)),a.setAttribute("aria-expanded",e?"false":"true")}}function E(){document.activeElement.addEventListener("keydown",H)}function p(o,a=!1){o.querySelectorAll(`.${r.navSections} > ul > li`).forEach(i=>{i.setAttribute("aria-expanded",a)})}function m(o,a,i=null){const e=i!==null?!i:o.getAttribute("aria-expanded")==="true",d=o.querySelector(`.${r.navHamburger} button`);document.body.style.overflowY=e||c.matches?"":"hidden",o.setAttribute("aria-expanded",e?"false":"true"),p(a,e||c.matches?"false":"true"),d.setAttribute("aria-label",e?"Open navigation":"Close navigation");const t=a.querySelectorAll(`.${r.navDrop}`);c.matches?t.forEach(s=>{s.hasAttribute("tabindex")||(s.setAttribute("role","button"),s.setAttribute("tabindex",0),s.addEventListener("focus",E))}):t.forEach(s=>{s.removeAttribute("role"),s.removeAttribute("tabindex"),s.removeEventListener("focus",E)}),!e||c.matches?window.addEventListener("keydown",h):window.removeEventListener("keydown",h)}async function N(o){const a=x("nav"),i=a?new URL(a).pathname:"/nav",e=await fetch(`${i}.plain.html`);if(e.ok){const d=await e.text(),t=document.createElement("nav");t.id="nav",t.innerHTML=d;const s=["brand","sections","tools"],v={brand:r.navBrand,sections:r.navSections,tools:r.navTools};s.forEach((u,b)=>{const g=t.children[b];g&&g.classList.add(v[u])});const n=t.querySelector(`.${r.navSections}`);n&&n.querySelectorAll(":scope > ul > li").forEach(u=>{u.querySelector("ul")&&u.classList.add(r.navDrop),u.addEventListener("click",()=>{if(c.matches){const b=u.getAttribute("aria-expanded")==="true";p(n),u.setAttribute("aria-expanded",b?"false":"true")}})});const l=document.createElement("div");l.classList.add(r.navHamburger),l.innerHTML=`<button type="button" aria-controls="nav" aria-label="Open navigation">
        <span class="${r.navHamburger}-icon"></span>
      </button>`,l.addEventListener("click",()=>m(t,n)),t.prepend(l),t.setAttribute("aria-expanded","false"),m(t,n,c.matches),c.addEventListener("change",()=>m(t,n,c.matches)),S(t),A(t);const f=document.createElement("div");f.className=r.navWrapper,f.append(t),o.append(f)}}export{N as default};
