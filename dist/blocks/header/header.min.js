import{getMetadata as E,decorateIcons as w}from"../../scripts/aem.min.js";const y="_nav-wrapper_vugxw_5",A="_nav-hamburger_vugxw_35",_="_nav-brand_vugxw_80",S="_nav-sections_vugxw_93",L="_nav-tools_vugxw_121",q="_nav-drop_vugxw_215",n={navWrapper:y,navHamburger:A,navBrand:_,navSections:S,navTools:L,navDrop:q},c=window.matchMedia("(min-width: 1200px)");function h(o){if(o.code==="Escape"){const e=document.getElementById("nav"),s=e.querySelector(`.${n.navSections}`),a=s.querySelector('[aria-expanded="true"]');a&&c.matches?(v(s),a.focus()):c.matches||(l(e,s),e.querySelector("button").focus())}}function D(o){const e=document.activeElement;if(e.className===n.navDrop&&(o.code==="Enter"||o.code==="Space")){const a=e.getAttribute("aria-expanded")==="true";v(e.closest(`.${n.navSections}`)),e.setAttribute("aria-expanded",a?"false":"true")}}function g(){document.activeElement.addEventListener("keydown",D)}function v(o,e=!1){o.querySelectorAll(`.${n.navSections} > ul > li`).forEach(s=>{s.setAttribute("aria-expanded",e)})}function l(o,e,s=null){const a=s!==null?!s:o.getAttribute("aria-expanded")==="true",p=o.querySelector(`.${n.navHamburger} button`);document.body.style.overflowY=a||c.matches?"":"hidden",o.setAttribute("aria-expanded",a?"false":"true"),v(e,a||c.matches?"false":"true"),p.setAttribute("aria-label",a?"Open navigation":"Close navigation");const t=e.querySelectorAll(`.${n.navDrop}`);c.matches?t.forEach(r=>{r.hasAttribute("tabindex")||(r.setAttribute("role","button"),r.setAttribute("tabindex",0),r.addEventListener("focus",g))}):t.forEach(r=>{r.removeAttribute("role"),r.removeAttribute("tabindex"),r.removeEventListener("focus",g)}),!a||c.matches?window.addEventListener("keydown",h):window.removeEventListener("keydown",h)}async function $(o){const e=E("nav"),s=e?new URL(e).pathname:"/nav",a=await fetch(`${s}.plain.html`);if(a.ok){const p=await a.text(),t=document.createElement("nav");t.id="nav",t.innerHTML=p;const r=["brand","sections","tools"],x={brand:n.navBrand,sections:n.navSections,tools:n.navTools};r.forEach((i,f)=>{const b=t.children[f];b&&b.classList.add(x[i])});const d=t.querySelector(`.${n.navSections}`);d&&d.querySelectorAll(":scope > ul > li").forEach(i=>{i.querySelector("ul")&&i.classList.add(n.navDrop),i.addEventListener("click",()=>{if(c.matches){const f=i.getAttribute("aria-expanded")==="true";v(d),i.setAttribute("aria-expanded",f?"false":"true")}})});const u=document.createElement("div");u.classList.add(n.navHamburger),u.innerHTML=`<button type="button" aria-controls="nav" aria-label="Open navigation">
        <span class="${n.navHamburger}-icon"></span>
      </button>`,u.addEventListener("click",()=>l(t,d)),t.prepend(u),t.setAttribute("aria-expanded","false"),l(t,d,c.matches),c.addEventListener("change",()=>l(t,d,c.matches)),w(t);const m=document.createElement("div");m.className=n.navWrapper,m.append(t),o.append(m)}}export{$ as default};
